!function(){"use strict";var t=window.location.pathname.split("/"),e=t[t.length-1],n=window.location.search.indexOf("fans")>=0,o=n?"粉丝":"关注",c=[],a=[],r=0,s=null,l=0;function i(t){for(var e=0,n=c;e<n.length;e++)if(t==n[e])return!0;return!1}function u(){if(r>=c.length)return console.log("操作结束。 发现 ".concat(c.length," , 成功 ").concat(c.length-l," , 失败 ").concat(l," 。请刷新页面以卸载脚本。")),void(s&&clearInterval(s));var t=c[r],e=a[r],n=new XMLHttpRequest;n.open("POST","https://weibo.com/aj/filter/block?ajwvr=6",!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send("uid="+t+"&filter_type=1&status=1&interact=1&follow=1"),n.onreadystatechange=function(){if(4==n.readyState)if(200==n.status){var o={msg:"解析失败"};try{o=JSON.parse(n.responseText)}catch(t){}1e5==o.code?console.log("[".concat(r,"/").concat(c.length,"] 屏蔽 ").concat(t,"(").concat(e,") 成功，状态码 ").concat(n.status,"，返回值 ").concat(n.responseText)):(l++,console.error("[".concat(r,"/").concat(c.length,"] 屏蔽 ").concat(t,"(").concat(e,") 失败！状态码 ").concat(n.status,"，返回值 ").concat(n.responseText)))}else console.error("发生错误",n.status.toString(),n.responseText)},r++}console.log("任务：屏蔽 UID ".concat(e," 的 ").concat(o," 。")),function t(){console.log("正在列出 ".concat(o," 列表第 ").concat(r+1," 页："));var l="https://weibo.com/ajax/friendships/friends?page=".concat(r,"&uid=").concat(e)+(n?"&relate=fans":"");console.log(l);var f=new XMLHttpRequest;f.open("GET",l,!0),f.onreadystatechange=function(){if(4==f.readyState)if(200==f.status){var e=function(t){try{return JSON.parse(t)}catch(t){return console.error(t),null}}(f.responseText);if(e){var n=e.users;if(n.length>0){for(var o=0,l=n;o<l.length;o++){var h=l[o],p=parseInt(h.id);2671109275==p||i(p)||(c.push(p),a.push(h.name))}console.log("已加入准备拉黑名单 ".concat(c.length," 人。")),setTimeout((function(){r++,t()}),Math.round(1e3*Math.random())+1e3)}else{for(var g=[],d=0;d<c.length;d++)g.push("".concat(c[d],"(").concat(a[d],")"));console.log(g.join(", ")),console.warn("名单收集完成，以上为准备被拉黑名单的 ".concat(c.length," 人。10 秒后开始拉黑，要中断请刷新页面。")),setTimeout((function(){r=0,s=window.setInterval(u,Math.round(1e3*Math.random())+1e3)}),1e4)}}else console.error("发生错误",f.status.toString(),f.responseText)}else console.error("发生错误",f.status.toString(),f.responseText)},f.send()}()}();